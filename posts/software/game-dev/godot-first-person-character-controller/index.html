<!doctype html><html><head><title>Godot First Person Controller (Rigidbody)</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/layouts/main.css><link rel=stylesheet href=/css/navigators/navbar.css><link rel=stylesheet href=/css/plyr.css><link rel=stylesheet href=/css/flag-icon.min.css><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Muli:wght@300;400;500;600"><link rel=stylesheet href=/fontawesome/css/all.min.css><link rel=stylesheet href=/css/colortheme/colortheme.css><link rel=icon type=image/png href=/images/site/logo_huccbe1dced2bd58e862e6c832fc83ef57_9458_42x0_resize_q75_h2_box_2.webp><meta property="og:title" content="Godot First Person Controller (Rigidbody)"><meta property="og:description" content="FPCC using a RigidDynamicBody3D..."><meta property="og:type" content="article"><meta property="og:url" content="https://portfolio.kylerassweiler.ca/posts/software/game-dev/godot-first-person-character-controller/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-08-25T10:58:08-04:00"><meta property="article:modified_time" content="2022-08-25T10:58:08-04:00"><meta property="og:site_name" content="Kyle Rassweiler's Portfolio"><meta name=description content="FPCC using a RigidDynamicBody3D..."><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/atom-one-dark.min.css><link rel=stylesheet href=/css/layouts/single.css><link rel=stylesheet href=/css/navigators/sidebar.css><link rel=stylesheet href=/css/style.css></head><body data-spy=scroll data-target=#TableOfContents data-offset=80><div class="container-fluid bg-dimmed wrapper"><nav class="navbar navbar-expand-xl top-navbar final-navbar shadow"><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button onclick=toggleSidebar()>
<span class=navbar-toggler-icon></span></button>
<a class=navbar-brand href=/><img src=/images/site/logo_huccbe1dced2bd58e862e6c832fc83ef57_9458_42x0_resize_q75_h2_box_2.webp alt=Logo>
Kyle Rassweiler's Portfolio</a>
<button class="navbar-toggler navbar-light" id=toc-toggler type=button onclick=toggleTOC()>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse lang-selector" id=top-nav-items><ul class="navbar-nav ml-auto"><li class="nav-item dropdown"><div id=theme-initialization style=display:none default-theme=dark></div><a class="nav-link dropdown-toggle" href=# id=themeSelector role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><img id=navbar-theme-icon-svg src=/icons/moon-svgrepo-com.svg width=20></a><div class="dropdown-menu dropdown-menu-icons-only" aria-labelledby=themeSelector><a class="dropdown-item nav-link" href=# onclick=enableLightTheme()><img class=menu-icon-center src=/icons/sun-svgrepo-com.svg width=20></a>
<a class="dropdown-item nav-link" href=# onclick=enableDarkTheme()><img class=menu-icon-center src=/icons/moon-svgrepo-com.svg width=20></a>
<a class="dropdown-item nav-link" href=# onclick=useSystemTheme()><img class=menu-icon-center src=/icons/computer-svgrepo-com.svg width=20></a></div></li></ul></div></div><img src=/images/site/logo_huccbe1dced2bd58e862e6c832fc83ef57_9458_42x0_resize_q75_h2_box_2.webp class=d-none id=main-logo alt=Logo>
<img src=/images/site/logo-inverted_hu070bfe41fdeb7aa0d8e46d50934d5f6a_10868_42x0_resize_q75_h2_box_2.webp class=d-none id=inverted-logo alt="Inverted Logo"></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/search><input type=text name=keyword placeholder=Search data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts data-filter=all>Posts</a></li><div class=subtree><li><i class="fas fa-plus-circle"></i><a href=/posts/design/>Design</a><ul><li><a href=/posts/design/2d/ title=2D>2D</a></li><li><a href=/posts/design/3d/ title=3D>3D</a></li><li><a href=/posts/design/cad/ title=CAD>CAD</a></li><li><a href=/posts/design/game-dev/ title="Game Dev">Game Dev</a></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/posts/farming/>Farming</a><ul><li><a href=/posts/farming/recipes/ title=Recipes>Recipes</a></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/posts/hardware/>Hardware</a><ul><li><a href=/posts/hardware/homelab/ title=Homelab>Homelab</a></li><li><a href=/posts/software/web/ title=Web>Web</a></li></ul></li><li><i class="fas fa-minus-circle"></i><a class=active href=/posts/software/>Software</a><ul class=active><li><a href=/posts/software/c++/ title=C++>C++</a></li><li><a href=/posts/software/linux/ title=Linux>Linux</a></li><li><a href=/posts/software/node/ title=Node>Node</a></li></ul></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(/posts/software/game-dev/godot-first-person-character-controller/images/fpcc-bg.webp)></div><div class=page-content><div class="author-profile ml-auto align-self-lg-center"><img class=rounded-circle src=/images/site/profile_hu5278f3a43387e981f9f391c9cc69f5bc_20162_120x120_fit_q75_h2_box_2.webp alt="Author Image"><h5 class=author-name></h5><p>Thursday, August 25, 2022</p></div><div class=title><h1>Godot First Person Controller (Rigidbody)</h1></div><div class=taxonomy-terms><ul><li class=rounded><a href=/tags/software class="btn, btn-sm">Software</a></li><li class=rounded><a href=/tags/godot class="btn, btn-sm">Godot</a></li><li class=rounded><a href=/tags/character class="btn, btn-sm">Character</a></li><li class=rounded><a href=/tags/controller class="btn, btn-sm">Controller</a></li><li class=rounded><a href=/tags/first-person class="btn, btn-sm">First Person</a></li></ul></div><div class=post-content id=post-content><p>A simple rigidbody based first person controller.</p><hr><h2 id=scene-stack>Scene Stack</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span>[<span style=color:#a6e22e>gd_scene</span> <span style=color:#a6e22e>load_steps</span>=<span style=color:#ae81ff>5</span> <span style=color:#a6e22e>format</span>=<span style=color:#ae81ff>3</span> <span style=color:#a6e22e>uid</span>=<span style=color:#e6db74>&#34;uid://dtwbwpgj5l554&#34;</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>ext_resource</span> <span style=color:#a6e22e>type</span>=<span style=color:#e6db74>&#34;Script&#34;</span> <span style=color:#a6e22e>path</span>=<span style=color:#e6db74>&#34;res://Characters/first_person_camera_rigidbody/first_person_camera_rigid.gd&#34;</span> <span style=color:#a6e22e>id</span>=<span style=color:#e6db74>&#34;1_c5av4&#34;</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>sub_resource</span> <span style=color:#a6e22e>type</span>=<span style=color:#e6db74>&#34;PhysicsMaterial&#34;</span> <span style=color:#a6e22e>id</span>=<span style=color:#e6db74>&#34;PhysicsMaterial_to0ij&#34;</span>]
</span></span><span style=display:flex><span><span style=color:#a6e22e>resource_local_to_scene</span> = <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>rough</span> = <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>sub_resource</span> <span style=color:#a6e22e>type</span>=<span style=color:#e6db74>&#34;CapsuleMesh&#34;</span> <span style=color:#a6e22e>id</span>=<span style=color:#e6db74>&#34;CapsuleMesh_yj4ak&#34;</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>sub_resource</span> <span style=color:#a6e22e>type</span>=<span style=color:#e6db74>&#34;ConvexPolygonShape3D&#34;</span> <span style=color:#a6e22e>id</span>=<span style=color:#e6db74>&#34;ConvexPolygonShape3D_k2gcp&#34;</span>]
</span></span><span style=display:flex><span><span style=color:#a6e22e>points</span> = <span style=color:#a6e22e>PackedVector3Array</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#ae81ff>-0.125207</span>, <span style=color:#ae81ff>-0.532801</span>, <span style=color:#ae81ff>-0.480507</span>, <span style=color:#ae81ff>0.0227831</span>, <span style=color:#ae81ff>0.47607</span>, <span style=color:#ae81ff>0.498884</span>, <span style=color:#ae81ff>0.169713</span>, <span style=color:#ae81ff>0.559144</span>, <span style=color:#ae81ff>0.464172</span>, <span style=color:#ae81ff>0.231051</span>, <span style=color:#ae81ff>-0.803591</span>, <span style=color:#ae81ff>0.320455</span>, <span style=color:#ae81ff>0.40741</span>, <span style=color:#ae81ff>0.651043</span>, <span style=color:#ae81ff>-0.243523</span>, <span style=color:#ae81ff>-0.482789</span>, <span style=color:#ae81ff>0.594843</span>, <span style=color:#ae81ff>0.0822132</span>, <span style=color:#ae81ff>-0.362868</span>, <span style=color:#ae81ff>-0.682312</span>, <span style=color:#ae81ff>0.289697</span>, <span style=color:#ae81ff>0.469044</span>, <span style=color:#ae81ff>-0.654529</span>, <span style=color:#ae81ff>-0.0662713</span>, <span style=color:#ae81ff>-0.127444</span>, <span style=color:#ae81ff>0.842701</span>, <span style=color:#ae81ff>-0.338103</span>, <span style=color:#ae81ff>-0.393435</span>, <span style=color:#ae81ff>-0.683942</span>, <span style=color:#ae81ff>-0.244717</span>, <span style=color:#ae81ff>0.438255</span>, <span style=color:#ae81ff>0.623309</span>, <span style=color:#ae81ff>0.200849</span>, <span style=color:#ae81ff>0.0841477</span>, <span style=color:#ae81ff>0.977454</span>, <span style=color:#ae81ff>0.114795</span>, <span style=color:#ae81ff>-0.0682023</span>, <span style=color:#ae81ff>-0.976458</span>, <span style=color:#ae81ff>-0.12927</span>, <span style=color:#ae81ff>0.20055</span>, <span style=color:#ae81ff>-0.563129</span>, <span style=color:#ae81ff>-0.451454</span>, <span style=color:#ae81ff>-0.185527</span>, <span style=color:#ae81ff>0.595453</span>, <span style=color:#ae81ff>-0.453475</span>, <span style=color:#ae81ff>-0.273363</span>, <span style=color:#ae81ff>0.592268</span>, <span style=color:#ae81ff>0.407754</span>, <span style=color:#ae81ff>-0.00693649</span>, <span style=color:#ae81ff>-0.476823</span>, <span style=color:#ae81ff>0.49966</span>, <span style=color:#ae81ff>0.375821</span>, <span style=color:#ae81ff>-0.588614</span>, <span style=color:#ae81ff>0.316955</span>, <span style=color:#ae81ff>0.111579</span>, <span style=color:#ae81ff>0.563059</span>, <span style=color:#ae81ff>-0.481177</span>, <span style=color:#ae81ff>-0.41725</span>, <span style=color:#ae81ff>0.527866</span>, <span style=color:#ae81ff>-0.270497</span>, <span style=color:#ae81ff>-0.484546</span>, <span style=color:#ae81ff>-0.596972</span>, <span style=color:#ae81ff>-0.0665097</span>, <span style=color:#ae81ff>-0.279747</span>, <span style=color:#ae81ff>0.908561</span>, <span style=color:#ae81ff>0.0533361</span>, <span style=color:#ae81ff>-0.250197</span>, <span style=color:#ae81ff>-0.880712</span>, <span style=color:#ae81ff>0.205319</span>, <span style=color:#ae81ff>0.263647</span>, <span style=color:#ae81ff>-0.902771</span>, <span style=color:#ae81ff>-0.127394</span>, <span style=color:#ae81ff>0.293368</span>, <span style=color:#ae81ff>0.871526</span>, <span style=color:#ae81ff>-0.157196</span>, <span style=color:#ae81ff>0.373412</span>, <span style=color:#ae81ff>-0.526319</span>, <span style=color:#ae81ff>-0.328246</span>, <span style=color:#ae81ff>0.499663</span>, <span style=color:#ae81ff>0.476641</span>, <span style=color:#ae81ff>-0.00688856</span>, <span style=color:#ae81ff>0.0531056</span>, <span style=color:#ae81ff>0.875001</span>, <span style=color:#ae81ff>0.324703</span>, <span style=color:#ae81ff>-0.154543</span>, <span style=color:#ae81ff>-0.590854</span>, <span style=color:#ae81ff>0.465879</span>, <span style=color:#ae81ff>-0.0972799</span>, <span style=color:#ae81ff>-0.782358</span>, <span style=color:#ae81ff>-0.398188</span>, <span style=color:#ae81ff>-0.387649</span>, <span style=color:#ae81ff>-0.498171</span>, <span style=color:#ae81ff>0.31565</span>, <span style=color:#ae81ff>-0.30068</span>, <span style=color:#ae81ff>-0.587995</span>, <span style=color:#ae81ff>-0.388901</span><span style=color:#960050;background-color:#1e0010>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>node</span> <span style=color:#a6e22e>name</span>=<span style=color:#e6db74>&#34;first_person_camera_rigid&#34;</span> <span style=color:#a6e22e>type</span>=<span style=color:#e6db74>&#34;RigidDynamicBody3D&#34;</span>]
</span></span><span style=display:flex><span><span style=color:#a6e22e>axis_lock_angular_x</span> = <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>axis_lock_angular_y</span> = <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>axis_lock_angular_z</span> = <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>physics_material_override</span> = <span style=color:#a6e22e>SubResource</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#e6db74>&#34;PhysicsMaterial_to0ij&#34;</span><span style=color:#960050;background-color:#1e0010>)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>continuous_cd</span> = <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>contacts_reported</span> = <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>contact_monitor</span> = <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>freeze_mode</span> = <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>script</span> = <span style=color:#a6e22e>ExtResource</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#e6db74>&#34;1_c5av4&#34;</span><span style=color:#960050;background-color:#1e0010>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>node</span> <span style=color:#a6e22e>name</span>=<span style=color:#e6db74>&#34;MeshInstance3D&#34;</span> <span style=color:#a6e22e>type</span>=<span style=color:#e6db74>&#34;MeshInstance3D&#34;</span> <span style=color:#a6e22e>parent</span>=<span style=color:#e6db74>&#34;.&#34;</span>]
</span></span><span style=display:flex><span><span style=color:#a6e22e>mesh</span> = <span style=color:#a6e22e>SubResource</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#e6db74>&#34;CapsuleMesh_yj4ak&#34;</span><span style=color:#960050;background-color:#1e0010>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>node</span> <span style=color:#a6e22e>name</span>=<span style=color:#e6db74>&#34;CollisionShape&#34;</span> <span style=color:#a6e22e>type</span>=<span style=color:#e6db74>&#34;CollisionShape3D&#34;</span> <span style=color:#a6e22e>parent</span>=<span style=color:#e6db74>&#34;.&#34;</span>]
</span></span><span style=display:flex><span><span style=color:#a6e22e>shape</span> = <span style=color:#a6e22e>SubResource</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#e6db74>&#34;ConvexPolygonShape3D_k2gcp&#34;</span><span style=color:#960050;background-color:#1e0010>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>node</span> <span style=color:#a6e22e>name</span>=<span style=color:#e6db74>&#34;Neck&#34;</span> <span style=color:#a6e22e>type</span>=<span style=color:#e6db74>&#34;Node3D&#34;</span> <span style=color:#a6e22e>parent</span>=<span style=color:#e6db74>&#34;.&#34;</span>]
</span></span><span style=display:flex><span><span style=color:#a6e22e>transform</span> = <span style=color:#a6e22e>Transform3D</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0.623569</span>, <span style=color:#ae81ff>0</span><span style=color:#960050;background-color:#1e0010>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>node</span> <span style=color:#a6e22e>name</span>=<span style=color:#e6db74>&#34;Camera3D&#34;</span> <span style=color:#a6e22e>type</span>=<span style=color:#e6db74>&#34;Camera3D&#34;</span> <span style=color:#a6e22e>parent</span>=<span style=color:#e6db74>&#34;Neck&#34;</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>node</span> <span style=color:#a6e22e>name</span>=<span style=color:#e6db74>&#34;Feet&#34;</span> <span style=color:#a6e22e>type</span>=<span style=color:#e6db74>&#34;RayCast3D&#34;</span> <span style=color:#a6e22e>parent</span>=<span style=color:#e6db74>&#34;.&#34;</span>]
</span></span><span style=display:flex><span><span style=color:#a6e22e>transform</span> = <span style=color:#a6e22e>Transform3D</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>-0.957716</span>, <span style=color:#ae81ff>0</span><span style=color:#960050;background-color:#1e0010>)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>target_position</span> = <span style=color:#a6e22e>Vector3</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>-0.2</span>, <span style=color:#ae81ff>0</span><span style=color:#960050;background-color:#1e0010>)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>collision_mask</span> = <span style=color:#ae81ff>4095</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>collide_with_areas</span> = <span style=color:#66d9ef>true</span>
</span></span></code></pre></div><h2 id=scene-script>Scene Script</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>extends RigidDynamicBody3D
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@export</span> var acceleration <span style=color:#f92672>=</span> <span style=color:#ae81ff>15.0</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@export</span> var deceleration <span style=color:#f92672>=</span> <span style=color:#ae81ff>1.0</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@export</span> var jump_velocity <span style=color:#f92672>=</span> <span style=color:#ae81ff>5.0</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@export</span> var speed <span style=color:#f92672>=</span> <span style=color:#ae81ff>15.0</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@export</span> var max_speed <span style=color:#f92672>=</span> <span style=color:#ae81ff>15.0</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@export</span> var view_sensitivity <span style=color:#f92672>=</span> <span style=color:#ae81ff>10.0</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@export_range</span>(<span style=color:#ae81ff>0.01</span>,<span style=color:#ae81ff>1.0</span>) var stop_speed <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Get the gravity from the project settings to be synced with RigidDynamicBody nodes.</span>
</span></span><span style=display:flex><span>var gravity <span style=color:#f92672>=</span> ProjectSettings<span style=color:#f92672>.</span>get_setting(<span style=color:#e6db74>&#34;physics/3d/default_gravity&#34;</span>)
</span></span><span style=display:flex><span>var velocity <span style=color:#f92672>=</span> Vector3()
</span></span><span style=display:flex><span>var mouse_input <span style=color:#f92672>=</span> Vector2()
</span></span><span style=display:flex><span>var is_on_floor <span style=color:#f92672>=</span> false
</span></span><span style=display:flex><span>var move_input <span style=color:#f92672>=</span> Vector2()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@onready</span> var neck <span style=color:#f92672>:=</span> <span style=color:#960050;background-color:#1e0010>$</span>Neck
</span></span><span style=display:flex><span><span style=color:#a6e22e>@onready</span> var camera <span style=color:#f92672>:=</span> <span style=color:#960050;background-color:#1e0010>$</span>Neck<span style=color:#f92672>/</span>Camera3D
</span></span><span style=display:flex><span><span style=color:#a6e22e>@onready</span> var feet <span style=color:#f92672>:=</span> <span style=color:#960050;background-color:#1e0010>$</span>Feet
</span></span><span style=display:flex><span><span style=color:#a6e22e>@onready</span> var body <span style=color:#f92672>:=</span> <span style=color:#960050;background-color:#1e0010>$</span>CollisionShape
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>func _unhandled_input(event: InputEvent) <span style=color:#f92672>-&gt;</span> void:
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> event <span style=color:#f92672>is</span> InputEventMouseButton:
</span></span><span style=display:flex><span>		Input<span style=color:#f92672>.</span>set_mouse_mode(Input<span style=color:#f92672>.</span>MOUSE_MODE_CAPTURED)
</span></span><span style=display:flex><span>		
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>elif</span> event<span style=color:#f92672>.</span>is_action_pressed(<span style=color:#e6db74>&#34;ui_cancel&#34;</span>):
</span></span><span style=display:flex><span>		Input<span style=color:#f92672>.</span>set_mouse_mode(Input<span style=color:#f92672>.</span>MOUSE_MODE_VISIBLE)
</span></span><span style=display:flex><span>		
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> Input<span style=color:#f92672>.</span>get_mouse_mode() <span style=color:#f92672>==</span> Input<span style=color:#f92672>.</span>MOUSE_MODE_CAPTURED:
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> event <span style=color:#f92672>is</span> InputEventMouseMotion:
</span></span><span style=display:flex><span>			neck<span style=color:#f92672>.</span>rotate_y(<span style=color:#f92672>-</span>event<span style=color:#f92672>.</span>relative<span style=color:#f92672>.</span>x <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.01</span>)
</span></span><span style=display:flex><span>			camera<span style=color:#f92672>.</span>rotate_x(<span style=color:#f92672>-</span>event<span style=color:#f92672>.</span>relative<span style=color:#f92672>.</span>y <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.01</span>)
</span></span><span style=display:flex><span>			camera<span style=color:#f92672>.</span>rotation<span style=color:#f92672>.</span>x <span style=color:#f92672>=</span> clamp(camera<span style=color:#f92672>.</span>rotation<span style=color:#f92672>.</span>x, deg2rad(<span style=color:#f92672>-</span><span style=color:#ae81ff>50</span>), deg2rad(<span style=color:#ae81ff>80</span>))
</span></span><span style=display:flex><span>			mouse_input <span style=color:#f92672>=</span> event<span style=color:#f92672>.</span>relative
</span></span><span style=display:flex><span>			
</span></span><span style=display:flex><span>func _ready():
</span></span><span style=display:flex><span>	linear_damp <span style=color:#f92672>=</span> <span style=color:#ae81ff>1.0</span>
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>func _integrate_forces(state):
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> state<span style=color:#f92672>.</span>linear_velocity<span style=color:#f92672>.</span>length() <span style=color:#f92672>&gt;</span> max_speed:
</span></span><span style=display:flex><span>		state<span style=color:#f92672>.</span>linear_velocity <span style=color:#f92672>=</span> state<span style=color:#f92672>.</span>linear_velocity<span style=color:#f92672>.</span>normalized() <span style=color:#f92672>*</span> max_speed
</span></span><span style=display:flex><span>		
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> move_input<span style=color:#f92672>.</span>length() <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0.2</span>:
</span></span><span style=display:flex><span>		state<span style=color:#f92672>.</span>linear_velocity<span style=color:#f92672>.</span>x <span style=color:#f92672>=</span> lerp(state<span style=color:#f92672>.</span>linear_velocity<span style=color:#f92672>.</span>x, <span style=color:#ae81ff>0.0</span>, stop_speed)
</span></span><span style=display:flex><span>		state<span style=color:#f92672>.</span>linear_velocity<span style=color:#f92672>.</span>z <span style=color:#f92672>=</span> lerp(state<span style=color:#f92672>.</span>linear_velocity<span style=color:#f92672>.</span>z, <span style=color:#ae81ff>0.0</span>, stop_speed)
</span></span><span style=display:flex><span>		
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> state<span style=color:#f92672>.</span>get_contact_count() <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>and</span> move_input<span style=color:#f92672>.</span>length() <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0.2</span>:
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> is_on_floor <span style=color:#f92672>and</span> state<span style=color:#f92672>.</span>get_contact_local_normal(<span style=color:#ae81ff>0</span>)<span style=color:#f92672>.</span>y <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0.9</span>:
</span></span><span style=display:flex><span>			apply_central_force(<span style=color:#f92672>-</span>state<span style=color:#f92672>.</span>get_contact_local_normal(<span style=color:#ae81ff>0</span>) <span style=color:#f92672>*</span> <span style=color:#ae81ff>10</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>func _physics_process(delta):
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> physics_material_override<span style=color:#f92672>.</span>friction <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>0</span>:
</span></span><span style=display:flex><span>		physics_material_override<span style=color:#f92672>.</span>friction <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>	move_input <span style=color:#f92672>=</span> Vector2<span style=color:#f92672>.</span>ZERO
</span></span><span style=display:flex><span>	var direction <span style=color:#f92672>=</span> Vector3()
</span></span><span style=display:flex><span>	move_input <span style=color:#f92672>=</span> Input<span style=color:#f92672>.</span>get_vector(<span style=color:#e6db74>&#34;move_left&#34;</span>, <span style=color:#e6db74>&#34;move_right&#34;</span>, <span style=color:#e6db74>&#34;move_forward&#34;</span>, <span style=color:#e6db74>&#34;move_back&#34;</span>)
</span></span><span style=display:flex><span>	direction <span style=color:#f92672>=</span> (neck<span style=color:#f92672>.</span>transform<span style=color:#f92672>.</span>basis <span style=color:#f92672>*</span> Vector3(move_input<span style=color:#f92672>.</span>x, <span style=color:#ae81ff>0</span>, move_input<span style=color:#f92672>.</span>y))<span style=color:#f92672>.</span>normalized()
</span></span><span style=display:flex><span>	velocity <span style=color:#f92672>=</span> lerp(velocity, direction <span style=color:#f92672>*</span> speed, acceleration <span style=color:#f92672>*</span> deceleration <span style=color:#f92672>*</span> delta)
</span></span><span style=display:flex><span>	apply_central_force(velocity)
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> feet<span style=color:#f92672>.</span>is_colliding():
</span></span><span style=display:flex><span>		is_on_floor <span style=color:#f92672>=</span> true
</span></span><span style=display:flex><span>		deceleration <span style=color:#f92672>=</span> <span style=color:#ae81ff>1.0</span>
</span></span><span style=display:flex><span>		physics_material_override<span style=color:#f92672>.</span>friction <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>		
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> Input<span style=color:#f92672>.</span>is_action_just_pressed(<span style=color:#e6db74>&#34;jump&#34;</span>) <span style=color:#f92672>and</span> is_on_floor:
</span></span><span style=display:flex><span>		deceleration <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.1</span>
</span></span><span style=display:flex><span>		is_on_floor <span style=color:#f92672>=</span> false
</span></span><span style=display:flex><span>		apply_central_impulse(Vector3<span style=color:#f92672>.</span>UP <span style=color:#f92672>*</span> jump_velocity)
</span></span></code></pre></div><hr></div><div class="row pl-3 pr-3"><div class="col-md-6 share-buttons"><strong>Share on:</strong>
<a class="btn btn-sm facebook-btn" href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fportfolio.kylerassweiler.ca%2fposts%2fsoftware%2fgame-dev%2fgodot-first-person-character-controller%2f" target=_blank><i class="fab fa-facebook"></i></a>
<a class="btn btn-sm twitter-btn" href="https://twitter.com/share?url=https%3a%2f%2fportfolio.kylerassweiler.ca%2fposts%2fsoftware%2fgame-dev%2fgodot-first-person-character-controller%2f&text=Godot%20First%20Person%20Controller%20%28Rigidbody%29&via=Kyle%20Rassweiler%27s%20Portfolio" target=_blank><i class="fab fa-twitter"></i></a>
<a class="btn btn-sm reddit-btn" href="https://reddit.com/submit?url=https%3a%2f%2fportfolio.kylerassweiler.ca%2fposts%2fsoftware%2fgame-dev%2fgodot-first-person-character-controller%2f&title=Godot%20First%20Person%20Controller%20%28Rigidbody%29" target=_blank><i class="fab fa-reddit"></i></a>
<a class="btn btn-sm linkedin-btn" href="https://www.linkedin.com/shareArticle?url=https%3a%2f%2fportfolio.kylerassweiler.ca%2fposts%2fsoftware%2fgame-dev%2fgodot-first-person-character-controller%2f&title=Godot%20First%20Person%20Controller%20%28Rigidbody%29" target=_blank><i class="fab fa-linkedin"></i></a>
<a class="btn btn-sm whatsapp-btn" href="https://api.whatsapp.com/send?text=Godot%20First%20Person%20Controller%20%28Rigidbody%29 https%3a%2f%2fportfolio.kylerassweiler.ca%2fposts%2fsoftware%2fgame-dev%2fgodot-first-person-character-controller%2f" target=_blank><i class="fab fa-whatsapp"></i></a>
<a class="btn btn-sm email-btn" href="mailto:?subject=Godot%20First%20Person%20Controller%20%28Rigidbody%29&body=https%3a%2f%2fportfolio.kylerassweiler.ca%2fposts%2fsoftware%2fgame-dev%2fgodot-first-person-character-controller%2f" target=_blank><i class="fas fa-envelope-open-text"></i></a></div><div class="col-md-6 btn-improve-page"><a href=https://github.com/rassweiler/portfolio/edit/master/content/posts/Software/Game-Dev/godot-first-person-character-controller/index.md title="Improve this page" target=_blank rel=noopener><i class="fas fa-code-branch"></i>
Improve this page</a></div></div><hr><div class="row next-prev-navigator"></div><hr></div></div></div><a id=scroll-to-top class=btn><i class="fas fa-chevron-circle-up"></i></a></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center pl-3">Table of Contents</h5><hr><div class=toc><nav id=TableOfContents><ul><li><ul><li><a href=#scene-stack>Scene Stack</a></li><li><a href=#scene-script>Scene Script</a></li></ul></li></ul></nav></div></div></section></div><footer id=footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-left"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=https://portfolio.kylerassweiler.ca/#about>About</a></li><li class=nav-item><a class=smooth-scroll href=https://portfolio.kylerassweiler.ca/#projects>Featured Projects</a></li><li class=nav-item><a class=smooth-scroll href=https://portfolio.kylerassweiler.ca/#skills>Skills</a></li><li class=nav-item><a class=smooth-scroll href=https://portfolio.kylerassweiler.ca/#accomplishments>Accomplishments</a></li><li class=nav-item><a class=smooth-scroll href=https://portfolio.kylerassweiler.ca/#experiences>Experiences</a></li><li class=nav-item><a class=smooth-scroll href=https://portfolio.kylerassweiler.ca/#education>Education</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><a href=mailto:jobs@kylerassweiler.ca target=_blank rel=noopener><span><i class="fas fa-envelope"></i></span> <span>jobs@kylerassweiler.ca</span></a></li><li><span><i class="fas fa-phone-alt"></i></span> <span>+1-613-724-9141</span></li></ul></div></div></div><hr><div class=container><div class="row text-left"><div class=col-md-4><a id=theme href=https://github.com/hossainemruz/toha target=_blank rel=noopener><img src=/images/theme-logo_hu8376fd15465fef26ffe66b6bcf0ca686_13669_32x0_resize_box_3.png alt="Toha Theme Logo">
Toha</a></div><div class="col-md-4 text-center">Â© 2022 Copyright.</div><div class="col-md-4 text-right"><a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script type=text/javascript src=/js/jquery-3.4.1.min.js></script>
<script type=text/javascript src=/js/popper.min.js></script>
<script type=text/javascript src=/js/bootstrap.min.js></script>
<script type=text/javascript src=/js/navbar.js></script>
<script type=text/javascript src=/js/plyr.js></script>
<script type=text/javascript src=/js/main.js></script>
<script type=text/javascript src=/js/darkreader.js></script>
<script type=text/javascript src=/js/darkmode-darkreader.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js></script>
<script src=/js/single.js></script>
<script>hljs.initHighlightingOnLoad()</script></body></html>